/*--------------------------------------------------------------------------*/
/**@file     ks0108_cpu.c
   @brief
   @details
   @author   hjt
   @date     2017-6-12
   @note
*/
/*----------------------------------------------------------------------------*/

#include "ks0108_cpu.h"


void set_lcd_port_in(void)
{
    GPIO_Init(LCD_D0_PORT, LCD_D0_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D1_PORT, LCD_D1_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D2_PORT, LCD_D2_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D3_PORT, LCD_D3_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D4_PORT, LCD_D4_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D5_PORT, LCD_D5_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D6_PORT, LCD_D6_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D7_PORT, LCD_D7_GPIO, DIR_IN, PULL_UP_EN, PULL_DOWM_DIS, OPEN_DRAIN_DIS);  
}



void set_lcd_port_out(void)
{
    GPIO_Init(LCD_D0_PORT, LCD_D0_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D1_PORT, LCD_D1_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D2_PORT, LCD_D2_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D3_PORT, LCD_D3_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D4_PORT, LCD_D4_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D5_PORT, LCD_D5_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D6_PORT, LCD_D6_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_D7_PORT, LCD_D7_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS); 
}



void LCD_GPIO_Configuration(void)	
{
    GPIO_Init(LCD_EN_PORT, LCD_EN_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_RW_PORT, LCD_RW_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_RS_PORT, LCD_RS_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_CSA_PORT, LCD_CSA_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
    GPIO_Init(LCD_CSB_PORT, LCD_CSB_GPIO, DIR_OUT, PULL_UP_DIS, PULL_DOWM_DIS, OPEN_DRAIN_DIS);
	set_lcd_port_out();
}

void Write_lcd_bus(U8 Data)
{
	U16 PortVal;
	PortVal = GPIO_ReadData(LCD_BUS_PORT);
	PortVal &= (~LCD_BUS_GPIO);
	PortVal |= Data;
	GPIO_Write(LCD_BUS_PORT,PortVal);
}


U8 Read_lcd_bus(void)
{
/*
	U16 PortVal;
	PortVal = GPIO_ReadData(LCD_BUS_PORT);
	return (U8)PortVal;
*/
    return (U8)GPIO_ReadData(LCD_BUS_PORT);; 
}


// ---- ÑÓ³Ù³ÌÐò ----------------------------------------------------
void LCD_DELAY(void)
{
	uint8_t del=50;
	do
	{
		del--;	
	}
	while (del);
}

